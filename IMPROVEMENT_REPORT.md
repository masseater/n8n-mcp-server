# n8n MCP Server 出力サイズ改善計画レポート

## 目的
現状のMCPツールはレスポンスサイズが大きく、コンテキスト長を圧迫している。
基本的に成功/失敗のステータスのみを返し、`raw`オプション指定時のみ完全なAPIレスポンスを返す仕組みに変更する。

## 各ツールの分析と改善計画

### 1. list_workflows

#### 現状
- **テストケース**:
- **出力サイズ**:
- **主な内容**:
- **問題点**:

#### 改善案
- **デフォルト出力**:
- **rawオプション出力**:
- **予想削減率**:

---

### 2. get_workflow

#### 現状
- **テストケース**:
- **出力サイズ**:
- **主な内容**:
- **問題点**:

#### 改善案
- **デフォルト出力**:
- **rawオプション出力**:
- **予想削減率**:

---

### 3. create_workflow

#### 現状
- **テストケース**:
- **出力サイズ**:
- **主な内容**:
- **問題点**:

#### 改善案
- **デフォルト出力**:
- **rawオプション出力**:
- **予想削減率**:

---

### 4. update_workflow

#### 現状
- **テストケース**:
- **出力サイズ**:
- **主な内容**:
- **問題点**:

#### 改善案
- **デフォルト出力**:
- **rawオプション出力**:
- **予想削減率**:

---

### 5. delete_workflow

#### 現状
- **テストケース**:
- **出力サイズ**:
- **主な内容**:
- **問題点**:

#### 改善案
- **デフォルト出力**:
- **rawオプション出力**:
- **予想削減率**:

---

## 総合分析

### コンテキスト削減効果の見込み

### ボトルネックまとめ

## 実装方針

### 共通レスポンス型の設計

### ResponseOptimizerの拡張

### ツールハンドラーの修正パターン

## 実装スケジュール

### Phase 1: 基盤整備
- [ ] 共通レスポンス型の定義
- [ ] ResponseOptimizerへのrawオプション対応追加

### Phase 2: 各ツールの実装
- [ ] list_workflows対応
- [ ] get_workflow対応
- [ ] create_workflow対応
- [ ] update_workflow対応
- [ ] delete_workflow対応

### Phase 3: テストと検証
- [ ] 各ツールの動作確認
- [ ] コンテキスト削減効果の測定
- [ ] ドキュメント更新

---
作成日: 2025-10-24
最終更新: 2025-10-24
